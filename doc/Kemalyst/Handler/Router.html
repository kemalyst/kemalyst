<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <meta id="repository-name" content="github.com/drujensen/kemalyst">
  <link href="../../css/style.css" rel="stylesheet" type="text/css" />
  <script type="text/javascript" src="../../js/doc.js"></script>
  <title>Kemalyst::Handler::Router - github.com/drujensen/kemalyst</title>
</head>
<body>

<div id="types-list">
  <div id="search-box">
    <input type="search" id="search-input" placeholder="Search...">
  </div>

  <ul>
    <li><a href="../../index.html">README</a></li>
  </ul>

  <ul>
  
  <li class="parent open current" data-id="github.com/drujensen/kemalyst/Kemalyst" data-name="kemalyst">
      <a href="../../Kemalyst.html">Kemalyst</a>
      
        <ul>
  
  <li class=" " data-id="github.com/drujensen/kemalyst/Kemalyst/Application" data-name="kemalyst::application">
      <a href="../../Kemalyst/Application.html">Application</a>
      
    </li>
  
  <li class=" " data-id="github.com/drujensen/kemalyst/Kemalyst/Controller" data-name="kemalyst::controller">
      <a href="../../Kemalyst/Controller.html">Controller</a>
      
    </li>
  
  <li class="parent " data-id="github.com/drujensen/kemalyst/Kemalyst/Exceptions" data-name="kemalyst::exceptions">
      <a href="../../Kemalyst/Exceptions.html">Exceptions</a>
      
        <ul>
  
  <li class=" " data-id="github.com/drujensen/kemalyst/Kemalyst/Exceptions/Forbidden" data-name="kemalyst::exceptions::forbidden">
      <a href="../../Kemalyst/Exceptions/Forbidden.html">Forbidden</a>
      
    </li>
  
  <li class=" " data-id="github.com/drujensen/kemalyst/Kemalyst/Exceptions/RouteNotFound" data-name="kemalyst::exceptions::routenotfound">
      <a href="../../Kemalyst/Exceptions/RouteNotFound.html">RouteNotFound</a>
      
    </li>
  
</ul>

      
    </li>
  
  <li class="parent open current" data-id="github.com/drujensen/kemalyst/Kemalyst/Handler" data-name="kemalyst::handler">
      <a href="../../Kemalyst/Handler.html">Handler</a>
      
        <ul>
  
  <li class=" " data-id="github.com/drujensen/kemalyst/Kemalyst/Handler/Base" data-name="kemalyst::handler::base">
      <a href="../../Kemalyst/Handler/Base.html">Base</a>
      
    </li>
  
  <li class=" " data-id="github.com/drujensen/kemalyst/Kemalyst/Handler/BasicAuth" data-name="kemalyst::handler::basicauth">
      <a href="../../Kemalyst/Handler/BasicAuth.html">BasicAuth</a>
      
    </li>
  
  <li class=" " data-id="github.com/drujensen/kemalyst/Kemalyst/Handler/Block" data-name="kemalyst::handler::block">
      <a href="../../Kemalyst/Handler/Block.html">Block</a>
      
    </li>
  
  <li class=" " data-id="github.com/drujensen/kemalyst/Kemalyst/Handler/CORS" data-name="kemalyst::handler::cors">
      <a href="../../Kemalyst/Handler/CORS.html">CORS</a>
      
    </li>
  
  <li class=" " data-id="github.com/drujensen/kemalyst/Kemalyst/Handler/CSRF" data-name="kemalyst::handler::csrf">
      <a href="../../Kemalyst/Handler/CSRF.html">CSRF</a>
      
    </li>
  
  <li class=" " data-id="github.com/drujensen/kemalyst/Kemalyst/Handler/Error" data-name="kemalyst::handler::error">
      <a href="../../Kemalyst/Handler/Error.html">Error</a>
      
    </li>
  
  <li class=" " data-id="github.com/drujensen/kemalyst/Kemalyst/Handler/Flash" data-name="kemalyst::handler::flash">
      <a href="../../Kemalyst/Handler/Flash.html">Flash</a>
      
    </li>
  
  <li class=" " data-id="github.com/drujensen/kemalyst/Kemalyst/Handler/Logger" data-name="kemalyst::handler::logger">
      <a href="../../Kemalyst/Handler/Logger.html">Logger</a>
      
    </li>
  
  <li class=" " data-id="github.com/drujensen/kemalyst/Kemalyst/Handler/Params" data-name="kemalyst::handler::params">
      <a href="../../Kemalyst/Handler/Params.html">Params</a>
      
    </li>
  
  <li class=" " data-id="github.com/drujensen/kemalyst/Kemalyst/Handler/Route" data-name="kemalyst::handler::route">
      <a href="../../Kemalyst/Handler/Route.html">Route</a>
      
    </li>
  
  <li class=" current" data-id="github.com/drujensen/kemalyst/Kemalyst/Handler/Router" data-name="kemalyst::handler::router">
      <a href="../../Kemalyst/Handler/Router.html">Router</a>
      
    </li>
  
  <li class=" " data-id="github.com/drujensen/kemalyst/Kemalyst/Handler/Session" data-name="kemalyst::handler::session">
      <a href="../../Kemalyst/Handler/Session.html">Session</a>
      
    </li>
  
  <li class=" " data-id="github.com/drujensen/kemalyst/Kemalyst/Handler/Static" data-name="kemalyst::handler::static">
      <a href="../../Kemalyst/Handler/Static.html">Static</a>
      
    </li>
  
</ul>

      
    </li>
  
  <li class=" " data-id="github.com/drujensen/kemalyst/Kemalyst/WebSocket" data-name="kemalyst::websocket">
      <a href="../../Kemalyst/WebSocket.html">WebSocket</a>
      
    </li>
  
</ul>

      
    </li>
  
</ul>

</div>

<div id="main-content">
<h1 class="type-name">

  <span class="kind">class</span> Kemalyst::Handler::Router

</h1>


  <ul class="superclass-hierarchy"><li class="superclass"><a href="../../Kemalyst/Handler/Router.html">Kemalyst::Handler::Router</a></li><li class="superclass"><a href="../../Kemalyst/Handler/Base.html">Kemalyst::Handler::Base</a></li><li class="superclass">HTTP::Handler</li><li class="superclass">Reference</li><li class="superclass">Object</li></ul>




  <h2>Overview</h2>

  <p>The Router Handler redirects traffic to the appropriate Handlers based on
the path and method provided.  This allows for filtering which handlers should
be accessed.  Several macros are provided to help with registering the
path and method handlers.  Routes should be defined in the
<code>config/routes.cr</code> file.</p>

<p>An example of a route would be:</p>

<pre><code>get <span class="s">&quot;/&quot;</span>, <span class="t">DemoController</span><span class="t">::</span><span class="t">Index</span>.instance</code></pre>

<p>You may also pass in a block similar to sinatra or kemal:</p>

<pre><code>get <span class="s">&quot;/&quot;</span> <span class="k">do</span> <span class="o">|</span>context<span class="o">|</span>
  text <span class="s">&quot;Great job&#33;&quot;</span>, <span class="n">200</span>
<span class="k">end</span></code></pre>

<p>You may chain multiple handlers in a route using an array:</p>

<pre><code>get <span class="s">&quot;/&quot;</span>, [ <span class="t">BasicAuth</span>.instance(<span class="s">&quot;username&quot;</span>, <span class="s">&quot;password&quot;</span>),
           <span class="t">DemoController</span><span class="t">::</span><span class="t">Index</span>.instance ]</code></pre>

<p>or:</p>

<pre><code>get <span class="s">&quot;/&quot;</span>, <span class="t">BasicAuth</span>.instance(<span class="s">&quot;username&quot;</span>, <span class="s">&quot;password&quot;</span>) <span class="k">do</span> <span class="o">|</span>context<span class="o">|</span>
  text <span class="s">&quot;This is secured by BasicAuth&#33;&quot;</span>, <span class="n">200</span>
<span class="k">end</span></code></pre>

<p>This is how you would configure a WebSocket:</p>

<pre><code>get <span class="s">&quot;/&quot;</span>, [ <span class="t">WebSocket</span>.instance(<span class="t">ChatController</span><span class="t">::</span><span class="t">Chat</span>.instance),
           <span class="t">ChatController</span><span class="t">::</span><span class="t">Index</span>.instance ]</code></pre>

<p>The <code>Chat</code> class would have a <code><a href="../../Kemalyst/Handler/Router.html#call%28context%29-instance-method">#call</a></code> method that is expecting an
<code>HTTP::WebSocket</code> to be passed which it would maintain and properly handle
messages to and from it.  Check out the sample Chat application to get an idea
on how to do this.</p>

<p>You can use any of the following methods: <code>get, post, put, patch, delete, all</code></p>

<p>You can use a <code>*</code> to chain a handler for all children of this path:</p>

<pre><code>all    <span class="s">&quot;/posts/*&quot;</span>,   <span class="t">BasicAuth</span>.instance(<span class="s">&quot;admin&quot;</span>, <span class="s">&quot;password&quot;</span>)

<span class="c"># all of these will be secured with the BasicAuth handler.</span>
get    <span class="s">&quot;/posts/:id&quot;</span>, <span class="t">DemoController</span><span class="t">::</span><span class="t">Show</span>.instance
put    <span class="s">&quot;/posts/:id&quot;</span>, <span class="t">DemoController</span><span class="t">::</span><span class="t">Update</span>.instance
delete <span class="s">&quot;/posts/:id&quot;</span>, <span class="t">DemoController</span><span class="t">::</span><span class="t">Delete</span>.instance</code></pre>

<p>You can use <code>:variable</code> in the path and it will set a
context.params["variable"] to the value in the url.</p>














  <h2>Defined in:</h2>
  
    
      <a href="https://github.com/drujensen/kemalyst/blob/6e0de72e048da66a948337c7fced3e20bcca6121/src/kemalyst/handler/router.cr#L99" target="_blank">kemalyst/handler/router.cr</a>
    
    <br/>
  





  <h2>Class Method Summary</h2>
  <ul class="list-summary">
    
      <li class="entry-summary">
        <a href="#instance-class-method" class="signature"><strong>.instance</strong></a>
        
          <div class="summary"><p>class method to return a singleton instance of this Controller</p></div>
        
      </li>
    
      <li class="entry-summary">
        <a href="#new-class-method" class="signature"><strong>.new</strong></a>
        
      </li>
    
  </ul>



  <h2>Instance Method Summary</h2>
  <ul class="list-summary">
    
      <li class="entry-summary">
        <a href="#add_route%28method%2Cpath%2Chandlers%3AArray%28HTTP%3A%3AHandler%29%29-instance-method" class="signature"><strong>#add_route</strong>(method, path, handlers : Array(HTTP::Handler))</a>
        
      </li>
    
      <li class="entry-summary">
        <a href="#add_route%28method%2Cpath%2Chandler%29-instance-method" class="signature"><strong>#add_route</strong>(method, path, handler)</a>
        
          <div class="summary"><p>Adds a given route to routing tree.</p></div>
        
      </li>
    
      <li class="entry-summary">
        <a href="#call%28context%29-instance-method" class="signature"><strong>#call</strong>(context)</a>
        
      </li>
    
      <li class="entry-summary">
        <a href="#lookup_route%28verb%2Cpath%29-instance-method" class="signature"><strong>#lookup_route</strong>(verb, path)</a>
        
          <div class="summary"><p>Check if a route is defined and returns the lookup</p></div>
        
      </li>
    
      <li class="entry-summary">
        <a href="#process_request%28context%29-instance-method" class="signature"><strong>#process_request</strong>(context)</a>
        
          <div class="summary"><p>Processes the route if it's a match.</p></div>
        
      </li>
    
      <li class="entry-summary">
        <a href="#tree%3ADelimiter%3A%3ATree%28Nil%7CKemalyst%3A%3AHandler%3A%3ARoute%29-instance-method" class="signature"><strong>#tree</strong> : Delimiter::Tree(Nil | Kemalyst::Handler::Route)</a>
        
      </li>
    
      <li class="entry-summary">
        <a href="#tree%3D%28tree%3ADelimiter%3A%3ATree%28Nil%7CKemalyst%3A%3AHandler%3A%3ARoute%29%29-instance-method" class="signature"><strong>#tree=</strong>(tree : Delimiter::Tree(Nil | Kemalyst::Handler::Route))</a>
        
      </li>
    
  </ul>





<div class="methods-inherited">
  
    

  <h3>Instance methods inherited from class <code><a href="../../Kemalyst/Handler/Base.html">Kemalyst::Handler::Base</a></code></h3>
  
  
    <a href="../../Kemalyst/Handler/Base.html#call%28context%29-instance-method" class="tooltip">
      <span>call(context)</span>
    call</a>, 
    
  
    <a href="../../Kemalyst/Handler/Base.html#config%28%26block%29-instance-method" class="tooltip">
      <span>config(&block)</span>
    config</a>, 
    
  
    <a href="../../Kemalyst/Handler/Base.html#logger-instance-method" class="tooltip">
      <span>logger</span>
    logger</a>
    
  


    

  <h3>Class methods inherited from class <code><a href="../../Kemalyst/Handler/Base.html">Kemalyst::Handler::Base</a></code></h3>
  
  
    <a href="../../Kemalyst/Handler/Base.html#config%28%26block%29-class-method" class="tooltip">
      <span>config(&block)</span>
    config</a>, 
    
  
    <a href="../../Kemalyst/Handler/Base.html#instance-class-method" class="tooltip">
      <span>instance</span>
    instance</a>
    
  


  
    


    


  
    


    


  
    


    


  
</div>


  <h2>Class Method Detail</h2>
  
    <div class="entry-detail" id="instance-class-method">
      <div class="signature">
        
        def self.<strong>instance</strong>

        <a class="method-permalink" href="#instance-class-method">#</a>
      </div>
      
        <div class="doc"><p>class method to return a singleton instance of this Controller</p></div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/drujensen/kemalyst/blob/6e0de72e048da66a948337c7fced3e20bcca6121/src/kemalyst/handler/router.cr#L103" target="_blank">View source</a>]
        
      </div>
    </div>
  
    <div class="entry-detail" id="new-class-method">
      <div class="signature">
        
        def self.<strong>new</strong>

        <a class="method-permalink" href="#new-class-method">#</a>
      </div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/drujensen/kemalyst/blob/6e0de72e048da66a948337c7fced3e20bcca6121/src/kemalyst/handler/router.cr#L107" target="_blank">View source</a>]
        
      </div>
    </div>
  



  <h2>Instance Method Detail</h2>
  
    <div class="entry-detail" id="add_route&#40;method,path,handlers:Array&#40;HTTP::Handler&#41;&#41;-instance-method">
      <div class="signature">
        
        def <strong>add_route</strong>(method, path, handlers : Array(HTTP::Handler))

        <a class="method-permalink" href="#add_route%28method%2Cpath%2Chandlers%3AArray%28HTTP%3A%3AHandler%29%29-instance-method">#</a>
      </div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/drujensen/kemalyst/blob/6e0de72e048da66a948337c7fced3e20bcca6121/src/kemalyst/handler/router.cr#L123" target="_blank">View source</a>]
        
      </div>
    </div>
  
    <div class="entry-detail" id="add_route&#40;method,path,handler&#41;-instance-method">
      <div class="signature">
        
        def <strong>add_route</strong>(method, path, handler)

        <a class="method-permalink" href="#add_route%28method%2Cpath%2Chandler%29-instance-method">#</a>
      </div>
      
        <div class="doc"><p>Adds a given route to routing tree. As an exception each <code>GET</code> route additionaly defines
a corresponding <code>HEAD</code> route.</p></div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/drujensen/kemalyst/blob/6e0de72e048da66a948337c7fced3e20bcca6121/src/kemalyst/handler/router.cr#L118" target="_blank">View source</a>]
        
      </div>
    </div>
  
    <div class="entry-detail" id="call&#40;context&#41;-instance-method">
      <div class="signature">
        
        def <strong>call</strong>(context)

        <a class="method-permalink" href="#call%28context%29-instance-method">#</a>
      </div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/drujensen/kemalyst/blob/6e0de72e048da66a948337c7fced3e20bcca6121/src/kemalyst/handler/router.cr#L111" target="_blank">View source</a>]
        
      </div>
    </div>
  
    <div class="entry-detail" id="lookup_route&#40;verb,path&#41;-instance-method">
      <div class="signature">
        
        def <strong>lookup_route</strong>(verb, path)

        <a class="method-permalink" href="#lookup_route%28verb%2Cpath%29-instance-method">#</a>
      </div>
      
        <div class="doc"><p>Check if a route is defined and returns the lookup</p></div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/drujensen/kemalyst/blob/6e0de72e048da66a948337c7fced3e20bcca6121/src/kemalyst/handler/router.cr#L130" target="_blank">View source</a>]
        
      </div>
    </div>
  
    <div class="entry-detail" id="process_request&#40;context&#41;-instance-method">
      <div class="signature">
        
        def <strong>process_request</strong>(context)

        <a class="method-permalink" href="#process_request%28context%29-instance-method">#</a>
      </div>
      
        <div class="doc"><p>Processes the route if it's a match. Otherwise renders 404.</p></div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/drujensen/kemalyst/blob/6e0de72e048da66a948337c7fced3e20bcca6121/src/kemalyst/handler/router.cr#L135" target="_blank">View source</a>]
        
      </div>
    </div>
  
    <div class="entry-detail" id="tree:Delimiter::Tree&#40;Nil|Kemalyst::Handler::Route&#41;-instance-method">
      <div class="signature">
        
        def <strong>tree</strong> : Delimiter::Tree(Nil | <a href="../../Kemalyst/Handler/Route.html">Kemalyst::Handler::Route</a>)

        <a class="method-permalink" href="#tree%3ADelimiter%3A%3ATree%28Nil%7CKemalyst%3A%3AHandler%3A%3ARoute%29-instance-method">#</a>
      </div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/drujensen/kemalyst/blob/6e0de72e048da66a948337c7fced3e20bcca6121/src/kemalyst/handler/router.cr#L100" target="_blank">View source</a>]
        
      </div>
    </div>
  
    <div class="entry-detail" id="tree&#61;&#40;tree:Delimiter::Tree&#40;Nil|Kemalyst::Handler::Route&#41;&#41;-instance-method">
      <div class="signature">
        
        def <strong>tree=</strong>(tree : Delimiter::Tree(Nil | <a href="../../Kemalyst/Handler/Route.html">Kemalyst::Handler::Route</a>))

        <a class="method-permalink" href="#tree%3D%28tree%3ADelimiter%3A%3ATree%28Nil%7CKemalyst%3A%3AHandler%3A%3ARoute%29%29-instance-method">#</a>
      </div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/drujensen/kemalyst/blob/6e0de72e048da66a948337c7fced3e20bcca6121/src/kemalyst/handler/router.cr#L100" target="_blank">View source</a>]
        
      </div>
    </div>
  




</div>

</body>
</html>
